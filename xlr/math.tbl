// ****************************************************************************
//  math.tbl                                                       XLR project
// ****************************************************************************
//
//   File Description:
//
//     Implementation of simple math
//
//
//
//
//
//
//
//
// ****************************************************************************
//  (C) 2015 Christophe de Dinechin <christophe@taodyne.com>
//  (C) 2015 Taodyne SAS
// ****************************************************************************

INFIX(IntMod,  integer, integer, "mod", integer, RIVAL(xl_mod(LEFT, RIGHT0)))
INFIX(RealMod, real,    real,    "mod", real,    RRVAL(xl_modf(LEFT, RIGHT0)))
INFIX(IntRem,  integer, integer, "rem", integer, RIVAL(LEFT % RIGHT0))
INFIX(RealRem, real,    real,    "rem", real,    RRVAL(fmod(LEFT, RIGHT0)))
INFIX(IntPow,  integer, integer, "^",   integer, RIVAL(xl_pow(LEFT, RIGHT)))
INFIX(RealPowI,real,    real,    "^",   integer, RRVAL(xl_powf(LEFT, RIGHT)))
INFIX(RealPow, real,    real,    "^",   real,    RRVAL(pow(LEFT, RIGHT)))

OVERLOAD(AbsI, "abs", integer, PARM(x, integer), RIVAL(x < 0 ? -x : x))
OVERLOAD(AbsR, "abs", real,    PARM(x, real),    RRVAL(fabs(x)))

#define REALFN(fn)  FUNCTION(fn, real, PARM(x, real), RRVAL(fn(x)))
REALFN(sqrt)
REALFN(sin)
REALFN(cos)
REALFN(tan)
REALFN(asin)
REALFN(acos)
REALFN(atan)
REALFN(exp)
REALFN(expm1)
REALFN(log)
REALFN(log10)
REALFN(log2)
REALFN(log1p)
